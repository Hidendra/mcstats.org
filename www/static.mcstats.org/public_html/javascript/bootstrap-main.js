// includes peity
(function(c,b){function e(g,i){var f=b.createElement("canvas");f.setAttribute("width",g*a);f.setAttribute("height",i*a);a!=1&&f.setAttribute("style","width:"+g+"px;height:"+i+"px");return f}var d=c.fn.peity=function(f,g){b.createElement("canvas").getContext&&this.each(function(){c(this).change(function(){var h=c.extend({},g),j=this;c.each(h,function(k,l){c.isFunction(l)&&(h[k]=l.call(j))});var i=c(this).html();d.graphers[f].call(this,c.extend({},d.defaults[f],h));c(this).trigger("chart:changed",i)}).trigger("change")});return this};d.graphers={};d.defaults={};d.add=function(g,i,f){d.graphers[g]=f;d.defaults[g]=i};var a=window.devicePixelRatio||1;d.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",diameter:16},function(i){var j=c(this),g=j.text().split(i.delimeter),m=parseFloat(g[0]),k=parseFloat(g[1]),g=-Math.PI/2,m=m/k*Math.PI*2,k=e(i.diameter,i.diameter),l=k.getContext("2d"),n=k.width/2;l.beginPath();l.moveTo(n,n);l.arc(n,n,n,m+g,m==0?Math.PI*2:g,!1);l.fillStyle=i.colours[0];l.fill();l.beginPath();l.moveTo(n,n);l.arc(n,n,n,g,m+g,!1);l.fillStyle=i.colours[1];l.fill();j.wrapInner(c("<span>").hide()).append(k)});d.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,min:0,width:32},function(B){var u=c(this),A=e(B.width,B.height),y=u.text().split(B.delimeter);y.length==1&&y.push(y[0]);var w=Math.max.apply(Math,y.concat([B.max])),x=Math.min.apply(Math,y.concat([B.min])),z=A.getContext("2d"),v=A.width,r=A.height,i=v/(y.length-1),w=r/(w-x),o=[],t;z.beginPath();z.moveTo(0,r+x*w);for(t=0;t<y.length;t++){var s=t*i,m=r-w*(y[t]-x);o.push({x:s,y:m});z.lineTo(s,m)}z.lineTo(v,r+x*w);z.fillStyle=B.colour;z.fill();if(B.strokeWidth){z.beginPath();z.moveTo(0,o[0].y);for(t=0;t<o.length;t++){z.lineTo(o[t].x,o[t].y)}z.lineWidth=B.strokeWidth*a;z.strokeStyle=B.strokeColour;z.stroke()}u.wrapInner(c("<span>").hide()).append(A)});d.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,min:0,width:32},function(t){var m=c(this),s=m.text().split(t.delimeter),q=Math.max.apply(Math,s.concat([t.max])),o=Math.min.apply(Math,s.concat([t.min])),p=e(t.width,t.height),r=p.getContext("2d"),n=p.height,q=n/(q-o),i=a/2,j=(p.width+i)/s.length;r.fillStyle=t.colour;for(t=0;t<s.length;t++){r.fillRect(t*j,n-q*(s[t]-o),j-i,q*s[t])}m.wrapInner(c("<span>").hide()).append(p)})})(jQuery,document);$(document).ready(function(){$(".submenu > a").click(function(h){h.preventDefault();var f=$(this).siblings("ul");var c=$(this).parents("li");var d=$("#sidebar li.submenu ul");var g=$("#sidebar li.submenu");if(c.hasClass("open")){if(($(window).width()>768)||($(window).width()<479)){f.slideUp()}else{f.fadeOut(250)}c.removeClass("open")}else{if(($(window).width()>768)||($(window).width()<479)){d.slideUp();f.slideDown()}else{d.fadeOut(250);f.fadeIn(250)}g.removeClass("open");c.addClass("open")}});var a=$("#sidebar > ul");$("#sidebar > a").click(function(d){d.preventDefault();var c=$("#sidebar");if(c.hasClass("open")){c.removeClass("open");a.slideUp(250)}else{c.addClass("open");a.slideDown(250)}});$(window).resize(function(){if($(window).width()>479){a.css({display:"block"});$("#content-header .btn-group").css({width:"auto"})}if($(window).width()<479){a.css({display:"none"});b()}if($(window).width()>768){$("#user-nav > ul").css({width:"auto",margin:"0"});$("#content-header .btn-group").css({width:"auto"})}});if($(window).width()<468){a.css({display:"none"});b()}if($(window).width()>479){$("#content-header .btn-group").css({width:"auto"});a.css({display:"block"})}$(".tip").tooltip();$(".tip-left").tooltip({placement:"left"});$(".tip-right").tooltip({placement:"right"});$(".tip-top").tooltip({placement:"top"});$(".tip-bottom").tooltip({placement:"bottom"});$("#search input[type=text]").typeahead({source:function(c,d){return $.get("/api/1.0/typeahead/",{q:c},function(e){return d(e)})},items:10});function b(){var c=$("#user-nav > ul").width();$("#user-nav > ul").css({width:c,"margin-left":"-"+c/2+"px"});var d=$("#content-header .btn-group").width();$("#content-header .btn-group").css({width:d,"margin-left":"-"+c/2+"px"})}$("#style-switcher i").click(function(){if($(this).hasClass("open")){$(this).parent().animate({marginRight:"-=190"});$(this).removeClass("open")}else{$(this).parent().animate({marginRight:"+=190"});$(this).addClass("open")}$(this).toggleClass("icon-arrow-left");$(this).toggleClass("icon-arrow-right")});$("#style-switcher a").click(function(){var c=$(this).attr("href").replace("#","");$(".skin-color").attr("href","css/unicorn."+c+".css");$(this).siblings("a").css({"border-color":"transparent"});$(this).css({"border-color":"#aaaaaa"})})});$(document).ready(function(){unicorn.peity()});unicorn={peity:function(){$.fn.peity.defaults.line={strokeWidth:1,delimeter:",",height:24,max:null,min:0,width:50};$.fn.peity.defaults.bar={delimeter:",",height:24,max:null,min:0,width:50};$(".peity_line_good span").peity("line",{colour:"#B1FFA9",strokeColour:"#459D1C"});$(".peity_line_bad span").peity("line",{colour:"#FFC4C7",strokeColour:"#BA1E20"});$(".peity_line_neutral span").peity("line",{colour:"#CCCCCC",strokeColour:"#757575"});$(".peity_bar_good span").peity("bar",{colour:"#459D1C"});$(".peity_bar_bad span").peity("bar",{colour:"#BA1E20"});$(".peity_bar_neutral span").peity("bar",{colour:"#757575"})},flot_tooltip:function(a,c,b){$('<div id="tooltip">'+b+"</div>").css({top:c+5,left:a+5}).appendTo("body").fadeIn(200)}};